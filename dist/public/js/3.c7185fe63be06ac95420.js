webpackJsonp([3],{172:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(1),n=function(t){return t&&t.__esModule?t:{default:t}}(o);e.default={replace:!0,data:function(){return{show:!1}},mounted:function(){var t=this;(0,n.default)(window).on("scroll",function(){(0,n.default)(window).scrollTop()>100?t.show=!0:t.show=!1})},beforeDestory:function(){(0,n.default)(window).off("scroll")},methods:{goTop:function(){(0,n.default)(window).scrollTop(0),this.show=!1}}}},173:function(t,e,s){t.exports={default:s(194),__esModule:!0}},194:function(t,e,s){var o=s(3),n=o.JSON||(o.JSON={stringify:JSON.stringify});t.exports=function(t){return n.stringify.apply(n,arguments)}},223:function(t,e){},270:function(t,e,s){s(223);var o=s(66)(s(172),s(271),null,null);t.exports=o.exports},271:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"iconfont icon-top",on:{click:t.goTop}},[t._v("")])},staticRenderFns:[]}},278:function(t,e,s){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=s(173),i=o(n),a=s(1),r=o(a),c=s(25),l=o(c),u=s(86),d=o(u),f=s(270),p=o(f);e.default={filters:{getLastTimeStr:function(t,e){return l.default.getLastTimeStr(t,e)}},data:function(){return{currentLocation:{lat:0,lng:0},scroll:!0,topics:[],index:{},searchKey:{page:1,limit:5,tab:"all",mdrender:!0,city:"Richmond"},searchDataStr:""}},mounted:function(){this.searchKey.city="Vancouver",this.$route.query&&this.$route.query.tab&&(this.searchKey.tab=this.$route.query.tab),window.window.sessionStorage.searchKey&&window.window.sessionStorage.tab===this.searchKey.tab?(this.topics=JSON.parse(window.window.sessionStorage.topics),this.searchKey=JSON.parse(window.window.sessionStorage.searchKey),this.$nextTick(function(){return(0,r.default)(window).scrollTop(window.window.sessionStorage.scrollTop)})):this.getTopics(),(0,r.default)(window).on("scroll",l.default.throttle(this.getScrollData,300,1e3))},beforeRouteLeave:function(t,e,s){"topic"===t.name&&(window.window.sessionStorage.scrollTop=(0,r.default)(window).scrollTop(),window.window.sessionStorage.topics=(0,i.default)(this.topics),window.window.sessionStorage.searchKey=(0,i.default)(this.searchKey),window.window.sessionStorage.tab=e.query.tab||"all"),(0,r.default)(window).off("scroll"),s()},beforeRouteEnter:function(t,e,s){"topic"!==e.name&&window.window.sessionStorage.tab&&(window.window.sessionStorage.removeItem("topics"),window.window.sessionStorage.removeItem("searchKey"),window.window.sessionStorage.removeItem("tab")),s()},methods:{getTitleStr:function(t){var e="";switch(t){case"share":e="分享";break;case"ask":e="问答";break;case"job":e="招聘";break;case"good":e="认证";break;default:e="全部"}return e},getTabInfo:function(t,e,s,o){return l.default.getTabInfo(t,e,s,o)},getTopics:function(){var t=this,e=r.default.param(this.searchKey);r.default.get("/api/topics?"+e,function(e){t.scroll=!0,e&&e.forEach(t.mergeTopics)})},mergeTopics:function(t){if("number"==typeof this.index[t._id]){var e=this.index[t._id];this.topics[e]=t}else this.index[t._id]=this.topics.length,this.topics.push(t)},getScrollData:function(){if(this.scroll){parseInt((0,r.default)(window).height(),20),parseInt((0,r.default)(window).scrollTop(),20);(0,r.default)(document).height()<=(0,r.default)(window).scrollTop()+1e3&&(this.scroll=!1,this.searchKey.page+=1,this.getTopics())}}},watch:{$route:function(t,e){t.query&&t.query.tab&&(this.searchKey.tab=t.query.tab,this.topics=[],this.index={}),this.searchKey.page=1,this.getTopics(),this.$refs.head.show=!1}},components:{nvHead:d.default,nvTop:p.default}}},291:function(t,e){},30:function(t,e,s){s(291);var o=s(66)(s(278),s(303),null,null);t.exports=o.exports},303:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nv-head",{ref:"head",attrs:{"page-type":t.getTitleStr(t.searchKey.tab),"fix-head":!0,"need-add":!0}}),t._v(" "),s("section",{attrs:{id:"page"}},[s("ul",{staticClass:"posts-list"},t._l(t.topics,function(e){return s("li",{key:e._id},[s("router-link",{attrs:{to:{name:"topic",params:{id:e._id}}}},[s("h3",{class:t.getTabInfo(e.tab,e.good,e.top,!0),attrs:{title:t.getTabInfo(e.tab,e.good,e.top,!1)}},[e.hasImage?s("span",{staticClass:"pic"},[t._v("有图")]):t._e(),t._v(" "+t._s(e.title)+"\n                ")]),t._v(" "),s("div",{staticClass:"content"},[s("img",{staticClass:"avatar",attrs:{src:e.author.avatar_url}}),t._v(" "),s("div",{staticClass:"info"},[s("p",[s("span",{staticClass:"name"},[t._v("\n                                "+t._s(e.author.loginname)+"\n                            ")]),t._v(" "),s("span",{staticClass:"status"},[s("b",[t._v(t._s(e.replies.length))]),t._v("\n                                /"+t._s(e.visit_count)+"\n                            ")])]),t._v(" "),s("div",{staticClass:"row",staticStyle:{padding:"15px"}},[t._l(e.smaill_imgs,function(e,o){return o<3?s("img",{staticClass:"col-xs-3 small-img",attrs:{src:e}}):t._e()}),t._v(" "),e.smaill_imgs.length>3?s("div",{staticClass:"col-xs-3"},[t._v("......")]):t._e()],2),t._v(" "),s("div",[s("span",{staticStyle:{float:"right"}},[t._v(t._s(t._f("getLastTimeStr")(e.created_at,!0)))])])])])])],1)}))]),t._v(" "),s("nv-top")],1)},staticRenderFns:[]}},66:function(t,e){t.exports=function(t,e,s,o){var n,i=t=t||{},a=typeof t.default;"object"!==a&&"function"!==a||(n=t,i=t.default);var r="function"==typeof i?i.options:i;if(e&&(r.render=e.render,r.staticRenderFns=e.staticRenderFns),s&&(r._scopeId=s),o){var c=Object.create(r.computed||null);Object.keys(o).forEach(function(t){var e=o[t];c[t]=function(){return e}}),r.computed=c}return{esModule:n,exports:i,options:r}}},71:function(t,e,s){"use strict";e.__esModule=!0;var o=s(76),n=function(t){return t&&t.__esModule?t:{default:t}}(o);e.default=n.default||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])}return t}},73:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(1),n=function(t){return t&&t.__esModule?t:{default:t}}(o);e.default={replace:!0,props:{pageType:String,fixHead:Boolean,messageCount:Number,scrollTop:0,needAdd:{type:Boolean,default:!0}},data:function(){return{nickname:"",profileimgurl:"",show:!1}},methods:{openMenu:function(){(0,n.default)("body").css("overflow","hidden"),this.show=!this.show},showMenus:function(){this.show=!this.show,(0,n.default)("body").css("overflow","auto")}},components:{nvMenu:s(87)}}},74:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={replace:!0,props:["showMenu","pageType","nickName","profileUrl"],components:{userInfo:s(88)},methods:{logout:function(){window.window.sessionStorage.clear(),this.$store.dispatch("setUserInfo",null),this.$router.push("login")}}}},75:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(71),n=function(t){return t&&t.__esModule?t:{default:t}}(o),i=s(20);e.default={replace:!0,computed:(0,n.default)({},(0,i.mapGetters)({userInfo:"getUserInfo"})),methods:{goEnter:function(){this.$router.push({name:"login",query:{redirect:encodeURIComponent(this.$route.path)}})},goUser:function(){this.$router.push({name:"user",params:{loginname:this.userInfo.loginname}})}}}},76:function(t,e,s){t.exports={default:s(77),__esModule:!0}},77:function(t,e,s){s(81),t.exports=s(3).Object.assign},78:function(t,e,s){"use strict";var o=s(23),n=s(79),i=s(80),a=s(24),r=s(22),c=Object.assign;t.exports=!c||s(4)(function(){var t={},e={},s=Symbol(),o="abcdefghijklmnopqrst";return t[s]=7,o.split("").forEach(function(t){e[t]=t}),7!=c({},t)[s]||Object.keys(c({},e)).join("")!=o})?function(t,e){for(var s=a(t),c=arguments.length,l=1,u=n.f,d=i.f;c>l;)for(var f,p=r(arguments[l++]),h=u?o(p).concat(u(p)):o(p),v=h.length,w=0;v>w;)d.call(p,f=h[w++])&&(s[f]=p[f]);return s}:c},79:function(t,e){e.f=Object.getOwnPropertySymbols},80:function(t,e){e.f={}.propertyIsEnumerable},81:function(t,e,s){var o=s(21);o(o.S+o.F,"Object",{assign:s(78)})},82:function(t,e){},83:function(t,e){},86:function(t,e,s){var o=s(66)(s(73),s(90),null,null);t.exports=o.exports},87:function(t,e,s){s(82);var o=s(66)(s(74),s(89),null,null);t.exports=o.exports},88:function(t,e,s){s(83);var o=s(66)(s(75),s(91),null,null);t.exports=o.exports},89:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"nav-list",class:{show:t.showMenu},attrs:{id:"sideBar"}},[s("user-info"),t._v(" "),s("section",{staticClass:"list-ul"},[s("router-link",{staticClass:"icon-quanbu iconfont item",attrs:{to:{name:"list",query:{tab:"all"}}}},[t._v("全部")]),t._v(" "),s("router-link",{staticClass:"icon-hao iconfont item",attrs:{to:{name:"list",query:{tab:"good"}}}},[t._v("认证")]),t._v(" "),s("router-link",{staticClass:"icon-fenxiang iconfont item",attrs:{to:{name:"list",query:{tab:"share"}}}},[t._v("分享")]),t._v(" "),s("router-link",{staticClass:"icon-wenda iconfont item",attrs:{to:{name:"list",query:{tab:"ask"}}}},[t._v("问答")]),t._v(" "),s("router-link",{staticClass:"icon-zhaopin iconfont item",attrs:{to:{name:"list",query:{tab:"job"}}}},[t._v("招聘")]),t._v(" "),s("router-link",{staticClass:"icon-xiaoxi iconfont item line",attrs:{to:{name:"message"}}},[t._v("消息")]),t._v(" "),s("router-link",{staticClass:"icon-about iconfont item",attrs:{to:{name:"about"}}},[t._v("关于")]),t._v(" "),s("a",{staticClass:"icon-about iconfont item",on:{click:t.logout}},[t._v("登出")])],1)],1)},staticRenderFns:[]}},90:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.show&&t.fixHead?s("div",{staticClass:"page-cover",on:{click:t.showMenus}}):t._e(),t._v(" "),s("header",{class:{show:t.show&&t.fixHead,"fix-header":t.fixHead,"no-fix":!t.fixHead},attrs:{id:"hd"}},[s("div",{staticClass:"nv-toolbar"},[t.fixHead?s("div",{staticClass:"toolbar-nav",on:{click:t.openMenu}}):t._e(),t._v(" "),s("span",{domProps:{textContent:t._s(t.pageType)}}),t._v(" "),t.messageCount>0?s("i",{staticClass:"num"},[t._v(" "+t._s(t.messageCount))]):t._e(),t._v(" "),s("router-link",{attrs:{to:"/add"}},[t.needAdd?s("i",{directives:[{name:"show",rawName:"v-show",value:!t.messageCount||t.messageCount<=0,expression:"!messageCount || messageCount <= 0"}],staticClass:"iconfont add-icon"},[t._v("")]):t._e()])],1)]),t._v(" "),t.fixHead?s("nv-menu",{attrs:{"show-menu":t.show,"page-type":t.pageType,"nick-name":t.nickname,"profile-url":t.profileimgurl}}):t._e()],1)},staticRenderFns:[]}},91:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-info"},[t.userInfo.loginname?t._e():s("ul",{staticClass:"login-no"},[s("li",{staticClass:"login",on:{click:t.goEnter}},[s("a",[t._v("登录")])])]),t._v(" "),t.userInfo.loginname?s("div",{staticClass:"login-yes",on:{click:t.goUser}},[s("div",{staticClass:"avertar"},[t.userInfo.avatar_url?s("img",{attrs:{src:t.userInfo.avatar_url}}):t._e()]),t._v(" "),s("div",{staticClass:"info"},[t.userInfo.loginname?s("p",{domProps:{textContent:t._s(t.userInfo.loginname)}}):t._e()])]):t._e()])},staticRenderFns:[]}}});